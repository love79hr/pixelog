<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Space Timeline</title>

  <!-- 파비콘 -->
  <link rel="icon" href="./images/main/pavicon.png">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="./css/sunghyun.css" />
  <link rel="stylesheet" href="./css/media4.css">
</head>

<body>
  <section class="hero">
    <div class="hero-img-container">
      <p class="img-txt">The Road to the Unknown.</p>
      <img src="./images/sunghyun-img/ann-danilina-kD6XJkkYA-4-unsplash.jpg" alt="img of an astronaut" />
    </div>
  </section>

  <img id="rocket" src="./images/sunghyun-img/rocket.jpeg" alt="rocket" class="rocket" />

  <section class="timeline section">
    <h2 class="section-title">History of 탐험</h2>
    <div class="timeline-intro">
      <h3><span class="star-icon">✨</span> 인류 우주 탐사의 발자취</h3>
      <p>광활한 우주를 향한 인류의 끊임없는 도전과 역사적인 순간들을 되돌아봅니다.</p>
    </div>
    <div class="timeline-line"></div>
    <div class="timeline-item left">
      <div class="content">
        <h3>1957</h3>
        <p>스푸트니크 1호 발사 – 인류 최초 인공위성</p>
      </div>
    </div>

    <div class="timeline-item right">
      <div class="content">
        <h3>1961</h3>
        <p>유리 가가린 – 최초의 유인 우주비행</p>
      </div>
    </div>

    <div class="timeline-item left">
      <div class="content">
        <h3>1969</h3>
        <p>아폴로 11호 – 인류 첫 달 착륙</p>
      </div>
    </div>

    <div class="timeline-item right">
      <div class="content">
        <h3>1998</h3>
        <p>국제우주정거장(ISS) 건설 시작</p>
      </div>
    </div>

    <div class="timeline-item left">
      <div class="content">
        <h3>2024</h3>
        <p>아르테미스 계획 – 인류의 달 복귀</p>
      </div>
    </div>
  </section>

  <section class="present section">
    <h2 class="section-title">The Present of 기술</h2>
    <div class="present-intro">
      <h3><span class="globe-icon">🛰️</span> 현재의 우주 기술</h3>
      <p>지금 이 순간에도 발전하고 있는 놀라운 우주 기술과 혁신적인 프로젝트들을 만나보세요.</p>
    </div>

    <div class="present-img">
      <div class="options">
        <div class="option active" style="background-image: url('./images/sunghyun-img/lucas-de-haas-rZ3RV10ccrs-unsplash.jpg')">
          <div class="shadow"></div>
          <div class="label">
            <div class="main">차세대 로켓 발사 기술</div>
            <div class="sub">재사용 가능 로켓과 저비용 우주 접근</div>
          </div>
        </div>
        <div class="option" style="background-image: url('./images/sunghyun-img/ivan-diaz-YOy-ek-aBR0-unsplash.jpg')">
          <div class="shadow"></div>
          <div class="label">
            <div class="main">NASA 우주왕복선</div>
            <div class="sub">지구와 달 탐사를 위해 끝임없는 노력</div>
          </div>
        </div>
        <div class="option" style="background-image: url('./images/sunghyun-img/interstellar.png')">
          <div class="shadow"></div>
          <div class="label">
            <div class="main">화성 탐사 로버 운영</div>
            <div class="sub">생명체 흔적 및 미래 기지 건설 연구</div>
          </div>
        </div>
        <div class="option" style="background-image: url('./images/sunghyun-img/rocket6.png')">
          <div class="shadow"></div>
          <div class="label">
            <div class="main">ISS 모듈 구조물</div>
            <div class="sub">우주정거장을 통한 외계세계와 연구망 구축</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <section id="exploration" class="section">
    <h2 class="section-title">Future of 우리의 모습</h2>
    <div class="exploration-intro">
      <h3><span class="rocket-icon">🚀</span> 미래를 향한 여정</h3>
      <p>인류의 우주 탐사는 멈추지 않을 것입니다. 다음은 다가올 미래의 탐사 프로젝트와 기술들입니다.</p>
    </div>

    <div class="carousel-container">
      <div class="carousel">
        <div class="carousel-item" style="--item-idx: 0;">
          <img src="./images/sunghyun-img/mars.png" alt="Mars Colony Concept">
          <div class="item-info">
            <h4>화성 식민지 개척</h4>
            <p>인류의 새로운 보금자리를 건설합니다.</p>
          </div>
        </div>
        <div class="carousel-item" style="--item-idx: 1;">
          <img src="./images/sunghyun-img/euro.png" alt="Jupiter Europa Lander">
          <div class="item-info">
            <h4>유로파 탐사선</h4>
            <p>목성의 위성 유로파의 생명체 탐사.</p>
          </div>
        </div>
        <div class="carousel-item" style="--item-idx: 2;">
          <img src="./images/sunghyun-img/interstellar.png" alt="Interstellar Probe">
          <div class="item-info">
            <h4>초고속 성간 탐사</h4>
            <p>태양계를 넘어 새로운 별을 향한 여정.</p>
            C
          </div>
        </div>
        <div class="carousel-item" style="--item-idx: 3;">
          <img src="./images/sunghyun-img/elevator.png" alt="Space Elevator">
          <div class="item-info">
            <h4>우주 엘리베이터</h4>
            <p>우주로 가는 새로운 고속도로 건설.</p>
          </div>
        </div>
        <div class="carousel-item" style="--item-idx: 4;">
          <img src="./images/sunghyun-img/living.png" alt="Exoplanet Habitation">
          <div class="item-info">
            <h4>외계 행성 거주</h4>
            <p>생명체가 살 수 있는 행성 발견 및 이주.</p>
          </div>
        </div>
      </div>
      <button class="carousel-btn prev">&lt;</button>
      <button class="carousel-btn next">&gt;</button>
    </div>
  </section>
  <div id="footer">
    <div class="container">
      <div class="row">
        <footer class="footer">
          <div class="f_logo">
            <a href="./index.html"><img src="./images/main/PIXELOG_logo_color.png" alt=""></a>
          </div>
          <div class="f_copy">
            <ul>
              <li>
                <a href="./mina.html">✨&nbsp;별과성운<span>&nbsp;&nbsp; |&nbsp;&nbsp;</span></a>
                <a href="./juwon.html">🪐&nbsp;행성과위성<span>&nbsp;&nbsp; |&nbsp;&nbsp;</span></a>
                <a href="./hyeran.html">🌌&nbsp;우주와은하<span>&nbsp;&nbsp; |&nbsp;&nbsp;</span></a>
                <a href="./sunghyun.html">🚀&nbsp;우주탐사와미래</a>
              </li>
            </ul>
            <p>2025© All Rights Reserved</p>
          </div>
          <div class="f_sns">
            <a href="#"><img src="./images/main/nasa-logo.png" alt="나사로고"></a>
            <a href="#"><img src="./images/main/logo_fac.png" alt="페이스북로고"></a>
            <a href="#"><img src="./images/main/logo_ins.png" alt="인스타로고"></a>
            <a href="#"><img src="./images/main/logo_x.png" alt="X로고"></a>
            <a href="#"><img src="./images/main/logo_yout.png" alt="유튜브로고"></a>
          </div>
        </footer>
      </div>
    </div>
  </div>

  <!-- Top 버튼과 홈 버튼 -->
  <div class="floating-buttons">
    <button id="topBtn" class="floating-btn top-btn" title="맨 위로">
      <i class="fa-solid fa-chevron-up"></i>
    </button>
    <button id="homeBtn" class="floating-btn home-btn" title="홈으로">
      <i class="fa-solid fa-home"></i>
    </button>
  </div>  

  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    // 초기 로드 시 첫 번째 섹션만 보이도록 설정 (선택 사항: hero 섹션에 .section 클래스가 없으면 이 부분은 불필요)
    // document.querySelector('.hero').classList.add('show');

    // 스크롤 이벤트 리스너
    window.addEventListener("scroll", () => {
      const rocket = document.getElementById("rocket");

      // ✅ 로켓 등장 및 위치 조정
      // 548px은 예시 값입니다. 로켓이 등장하기 시작할 스크롤 위치를 조절하세요.
      if (window.scrollY >= 548) {
        rocket.style.display = "block";
        // 스크롤 속도에 비례하여 로켓이 움직이도록 조정 (0.5는 속도 조절 계수)
        rocket.style.top = `${150 + window.scrollY * 0.4}px`; // 로켓 움직임 속도 조절
      } else {
        rocket.style.display = "none";
      }

      // 🌟 타임라인 항목 등장 (기존 코드 유지)
      document.querySelectorAll(".timeline-item").forEach((item) => {
        const rect = item.getBoundingClientRect();
        // 뷰포트 하단에서 100px 위로 올라왔을 때 나타나도록 조정
        if (rect.top < window.innerHeight - 100) {
          item.classList.add("show");
        }
      });

      // 🌟 모든 .section 클래스를 가진 요소 등장 (새로 추가)
      document.querySelectorAll("section.section").forEach((section) => {
        const rect = section.getBoundingClientRect();
        // 섹션이 뷰포트 하단에서 150px 위로 올라왔을 때 나타나도록 조정
        if (rect.top < window.innerHeight - 150) {
          section.classList.add("show");
        }
      });
    });

    
    $(document).ready(function () {
      $(".option").click(function () {
        $(".option").removeClass("active");
        $(this).addClass("active");
      });
    });

    // 페이지 로드 시 스크롤 위치를 확인하여 이미 뷰포트 안에 있는 섹션들을 표시
    window.addEventListener("load", () => {
      document.querySelectorAll("section.section").forEach((section) => {
        const rect = section.getBoundingClientRect();
        if (rect.top < window.innerHeight - 150) {
          section.classList.add("show");
        }
      });
    });

    document.addEventListener('DOMContentLoaded', () => {
      // 섹션 스크롤 애니메이션 (기존 코드 유지)
      const sections = document.querySelectorAll('.section');
      const sectionObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('show');
            // observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2 });
      sections.forEach(section => {
        sectionObserver.observe(section);
      });

      // 로켓 스크롤 이벤트 (기존 코드 유지)
      const rocket = document.querySelector('.rocket');
      const timelineSection = document.querySelector('.timeline-section');
      const presentSection = document.querySelector('.present-section');
      if (rocket && timelineSection && presentSection) {
        const rocketObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              rocket.classList.add('show');
              window.addEventListener('scroll', updateRocketPosition);
              updateRocketPosition();
            } else {
              rocket.classList.remove('show');
              window.removeEventListener('scroll', updateRocketPosition);
            }
          });
        }, {
          threshold: 0,
          rootMargin: '0px 0px -50% 0px'
        });

        rocketObserver.observe(timelineSection);

        function updateRocketPosition() {
          if (rocket.classList.contains('show')) {
            const scrollY = window.scrollY;
            const timelineTop = timelineSection.offsetTop;
            const newTop = Math.max(100, 100 - (scrollY - timelineTop + 200) * 0.5);
            rocket.style.top = `${newTop}px`;
          }
        }
      }






      // present 섹션 옵션 슬라이드 (기존 코드 유지)
      const options = document.querySelectorAll('.option');
      options.forEach(option => {
        option.addEventListener('click', () => {
          options.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
        });
      });

      // ====== 3D 캐러셀 스크립트 (개선된 우주 테마 원형 배치) ======

      const carousel = document.querySelector('.carousel');
      const carouselItems = document.querySelectorAll('.carousel-item');
      const prevBtn = document.querySelector('.carousel-btn.prev');
      const nextBtn = document.querySelector('.carousel-btn.next');

      const numItems = carouselItems.length;
      const angle = 360 / numItems;
      const radius = 450; // 캐러셀의 반지름 (유지)

      let currentRotation = 0;
      let activeItem = null; // 현재 활성화된(클릭된) 아이템 추적

      // 각 캐러셀 아이템을 3D 공간에 배치하는 함수
      function setupCarousel() {
        carouselItems.forEach((item, index) => {
          // 초기 transform 설정
          const initialTransform = `
                translate(-50%, -50%)
                rotateY(${index * angle}deg)
                translateZ(${radius}px)`;
          item.style.transform = initialTransform;
          item.dataset.initialTransform = initialTransform; // 초기 transform 저장
          item.dataset.index = index; // 아이템의 인덱스도 저장 (나중에 활용)
        });
      }

      // 캐러셀 회전 함수
      function rotateCarousel() {
        if (activeItem) {
          // 특정 아이템이 활성화된 상태에서는 회전 비활성화
          return;
        }
        carousel.style.transform = `
            translateZ(-${radius}px) 
            rotateY(${currentRotation}deg)`;
      }

      // 이전/다음 버튼 활성화/비활성화 함수
      function toggleNavigationButtons(enable) {
        prevBtn.disabled = !enable;
        nextBtn.disabled = !enable;
        prevBtn.style.pointerEvents = enable ? 'auto' : 'none';
        nextBtn.style.pointerEvents = enable ? '1' : '0.5'; // 버튼 투명도도 조절
        nextBtn.style.opacity = enable ? '1' : '0.5';
      }

      // 캐러셀 아이템 클릭 이벤트 리스너 추가
      carouselItems.forEach(item => {
        item.addEventListener('click', () => {
          // 현재 클릭된 아이템이 이미 활성화되어 있다면 비활성화
          if (activeItem === item) {
            activeItem.classList.remove('active');
            activeItem.style.transform = activeItem.dataset.initialTransform; // 초기 transform으로 되돌림
            carousel.classList.remove('has-active-item');

            // --- 이 부분이 핵심입니다: 버튼 활성화 로직 재확인 ---
            toggleNavigationButtons(true); // 버튼을 다시 활성화!
            // --------------------------------------------------

            carouselItems.forEach(otherItem => {
              otherItem.classList.remove('has-active-item');
            });
            activeItem = null;
            rotateCarousel(); // 회전 상태로 복귀
          } else {
            // 이미 다른 아이템이 활성화되어 있다면 먼저 비활성화
            if (activeItem) {
              activeItem.classList.remove('active');
              activeItem.style.transform = activeItem.dataset.initialTransform;
            }

            // 새로 클릭된 아이템 활성화
            item.classList.add('active');
            activeItem = item;

            item.style.transform = `
                    translate(-50%, -50%) 
                    rotateY(${currentRotation * -1}deg)
                    translateZ(${radius + 220}px)
                    scale(1.3)`;

            // --- 이 부분이 핵심입니다: 버튼 비활성화 로직 재확인 ---
            toggleNavigationButtons(false); // 버튼을 비활성화!
            // ----------------------------------------------------

            carousel.classList.add('has-active-item');
            carouselItems.forEach(otherItem => {
              if (otherItem !== activeItem) {
                otherItem.classList.add('has-active-item');
              } else {
                otherItem.classList.remove('has-active-item');
              }
            });
          }
        });
      });

      // 이전 버튼 클릭 이벤트
      prevBtn.addEventListener('click', () => {
        if (activeItem) return; // 활성화된 아이템이 있으면 회전 막기
        currentRotation += angle;
        rotateCarousel();
      });

      // 다음 버튼 클릭 이벤트
      nextBtn.addEventListener('click', () => {
        if (activeItem) return; // 활성화된 아이템이 있으면 회전 막기
        currentRotation -= angle;
        rotateCarousel();
      });

      // 초기 설정
      setupCarousel();
      rotateCarousel();
    });

    // Top 버튼과 홈 버튼 기능
    document.addEventListener('DOMContentLoaded', function() {
      const topBtn = document.getElementById('topBtn');
      const homeBtn = document.getElementById('homeBtn');

      // Top 버튼 클릭 시 페이지 맨 위로 스크롤
      topBtn.addEventListener('click', function() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });

      // 홈 버튼 클릭 시 홈페이지로 이동
      homeBtn.addEventListener('click', function() {
        window.location.href = './index.html';
      });

      // 스크롤 시 Top 버튼 표시/숨김
      window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
          topBtn.style.opacity = '1';
          topBtn.style.visibility = 'visible';
        } else {
          topBtn.style.opacity = '0';
          topBtn.style.visibility = 'hidden';
        }
      });
    });
  </script>
</body>

</html>